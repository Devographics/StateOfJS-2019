###############################################################################
#
# DEMOGRAPHICS
#
###############################################################################

# Used for salaries, company size, experience, etc. blocks
demographics-block:
    type: vertical-bar
    dataPath: 'demographics.${id}.2' # select the 4th array item to select the 4th year
    bucketKeys: { id }
    showDescription: true
    query: >
        demographics {
            ${id} {
                year
                total
                completion {
                    percentage
                    count
                }
                buckets {
                    id
                    count
                    percentage
                }
            }
        }

# Used for destructuring, arrow functions, WebGL, etc.
feature:
    type: feature
    dataPath: '${id}.usageByYear.0'
    showDescription: true
    query: >
        ${id}: feature(section: "${parentId}", id: "${id}") {
            id
            section
            usageByYear {
                total
                year
                completion {
                    percentage
                    count
                }
                buckets {
                    id
                    count
                    percentage
                }
            }
        }

# Used for "I think JavaScript is moving in the right direction", etc. blocks
# {id} refers to the current subject
opinion-scale:
    type: opinion-scale
    dataPath: '${id}.year'
    query: >
        ${id}: opinion(id: "${id}") {
            id
            year(year: ${year}) {
                completion {
                    count
                    percentage
                }
                buckets {
                    id
                    count
                    percentage
                }
            }
        }
